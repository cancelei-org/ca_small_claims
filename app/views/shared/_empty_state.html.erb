<%#
  Shared Empty State Component

  Usage:
    <%= render "shared/empty_state",
      icon: "document",           # document, search, check, clipboard, message, forms, folder (default: document)
      title: "No items",          # Main heading
      message: "Try again",       # Subtext (optional)
      action_path: path,          # Primary action link path (optional)
      action_text: "Clear",       # Primary action link text (optional)
      secondary_path: path,       # Secondary action path (optional)
      secondary_text: "Learn",    # Secondary action text (optional)
      suggestions: [],            # Array of {path:, text:, icon:} for suggested next actions
      variant: "default"          # default, success, card, compact (optional)
    %>
%>

<%
  icon ||= "document"
  title ||= "No items found"
  message ||= nil
  action_path ||= nil
  action_text ||= nil
  secondary_path ||= nil
  secondary_text ||= nil
  suggestions ||= []
  variant ||= "default"

  wrapper_classes = case variant
  when "card"
    "card bg-base-100 shadow-xl"
  when "success"
    "text-center py-12"
  when "compact"
    "text-center py-8"
  else
    "text-center py-12 bg-base-100 rounded-lg shadow"
  end

  icon_size = variant == "compact" ? "w-12 h-12" : "w-16 h-16"

  icon_classes = case variant
  when "success"
    "#{icon_size} mx-auto text-success mb-4"
  else
    "#{icon_size} mx-auto text-base-content/30 mb-4"
  end

  # Extended icon library with more expressive illustrations
  icons = {
    "document" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>',
    "search" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>',
    "check" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>',
    "clipboard" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>',
    "message" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"></path>',
    "forms" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path>',
    "folder" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"></path>',
    "sparkles" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"></path>',
    "arrow-right" => '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>'
  }
  icon_svg = icons[icon] || icons["document"]
%>

<% if variant == "card" %>
  <div class="<%= wrapper_classes %>">
    <div class="card-body text-center py-12">
<% else %>
  <div class="<%= wrapper_classes %>">
<% end %>

    <%# Decorative background circle %>
    <div class="relative inline-block">
      <div class="absolute inset-0 bg-base-200 rounded-full scale-150 opacity-50"></div>
      <svg class="<%= icon_classes %> relative" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <%= icon_svg.html_safe %>
      </svg>
    </div>

    <h2 class="mt-4 text-lg font-semibold text-base-content"><%= title %></h2>

    <% if message.present? %>
      <p class="mt-2 text-sm text-base-content/70 max-w-sm mx-auto"><%= message %></p>
    <% end %>

    <%# Primary and secondary actions %>
    <% if action_path.present? || secondary_path.present? %>
      <div class="mt-6 flex flex-wrap justify-center gap-3">
        <% if action_path.present? && action_text.present? %>
          <%= link_to action_path, class: "btn btn-primary btn-sm gap-2" do %>
            <%= action_text %>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <%= icons["arrow-right"].html_safe %>
            </svg>
          <% end %>
        <% end %>

        <% if secondary_path.present? && secondary_text.present? %>
          <%= link_to secondary_text, secondary_path, class: "btn btn-ghost btn-sm" %>
        <% end %>
      </div>
    <% end %>

    <%# Suggested next actions %>
    <% if suggestions.present? && suggestions.any? %>
      <div class="mt-8 pt-6 border-t border-base-200">
        <p class="text-xs font-medium text-base-content/50 uppercase tracking-wider mb-4">Suggested next steps</p>
        <div class="flex flex-wrap justify-center gap-2">
          <% suggestions.each do |suggestion| %>
            <%= link_to suggestion[:path], class: "inline-flex items-center gap-2 px-3 py-2 text-sm rounded-lg bg-base-200 hover:bg-base-300 transition-colors" do %>
              <% if suggestion[:icon] && icons[suggestion[:icon]] %>
                <svg class="w-4 h-4 text-base-content/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <%= icons[suggestion[:icon]].html_safe %>
                </svg>
              <% end %>
              <span><%= suggestion[:text] %></span>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

<% if variant == "card" %>
    </div>
  </div>
<% else %>
  </div>
<% end %>
