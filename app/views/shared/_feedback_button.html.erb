<%# Floating feedback button and modal for form pages %>
<div data-controller="feedback modal">
  <%# Floating Button %>
  <button type="button"
          class="fixed bottom-6 right-6 btn btn-primary btn-circle shadow-lg z-40 tooltip tooltip-left min-w-[56px] min-h-[56px] w-14 h-14"
          data-tip="Give feedback on this form"
          data-action="click->feedback#open"
          data-feedback-target="button"
          aria-label="Give feedback on this form">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
    </svg>
  </button>

  <%# Feedback Modal %>
  <dialog id="feedback-modal"
          class="modal modal-bottom sm:modal-middle"
          aria-labelledby="feedback-modal-title"
          aria-modal="true"
          role="dialog"
          data-feedback-target="modal"
          data-modal-target="dialog"
          data-action="click->feedback#backdropClick">
    <div class="modal-box">
      <h3 id="feedback-modal-title" class="font-bold text-lg mb-4">
        How was your experience with <%= form_definition.code %>?
      </h3>

      <div id="feedback-form-container">
        <%= render "form_feedbacks/form", form_definition: form_definition, feedback: FormFeedback.new %>
      </div>
    </div>

    <form method="dialog" class="modal-backdrop">
      <button aria-label="Close feedback form">close</button>
    </form>
  </dialog>
</div>
