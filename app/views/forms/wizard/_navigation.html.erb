<%# Wizard Navigation - Previous/Next/Finish buttons %>
<%# Mobile: stacked layout, Desktop: horizontal layout %>

<div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-4 mt-6 pt-4 border-t border-base-200">
  <%# Previous Button - full width on mobile %>
  <button type="button"
          class="btn btn-outline btn-primary gap-2 min-h-[48px] order-2 sm:order-1"
          data-wizard-target="prevBtn"
          data-action="click->wizard#previous"
          disabled>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
    <span>Previous</span>
  </button>

  <%# Keyboard Hints (Desktop only) %>
  <div class="hidden lg:flex items-center gap-2 text-xs text-base-content/50 order-2">
    <kbd class="kbd kbd-sm">Enter</kbd>
    <span>or</span>
    <kbd class="kbd kbd-sm">Ctrl</kbd>
    <span>+</span>
    <kbd class="kbd kbd-sm">Arrow</kbd>
    <span>to navigate</span>
  </div>

  <%# Swipe hint (Mobile only) %>
  <div class="flex sm:hidden items-center justify-center gap-2 text-xs text-base-content/50 order-3">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
    </svg>
    <span>Swipe to navigate</span>
  </div>

  <%# Next Button - full width on mobile, primary action first %>
  <button type="button"
          class="btn btn-primary gap-2 min-h-[48px] order-1 sm:order-3"
          data-wizard-target="nextBtn"
          data-action="click->wizard#next">
    <span>Next</span>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
  </button>

  <%# Finish Button (hidden until last field) %>
  <button type="submit"
          class="btn btn-success gap-2 min-h-[48px] hidden order-1 sm:order-3"
          data-wizard-target="finishBtn">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <span>Complete Form</span>
  </button>
</div>

<%# Quick navigation dots (for longer forms) - accessible with 44px touch targets %>
<% if @wizard_fields && @wizard_fields.count > 3 %>
  <nav class="mt-4" aria-label="Form field navigation">
    <div class="flex justify-center gap-1 flex-wrap" role="tablist">
      <% @wizard_fields.each_with_index do |field, idx| %>
        <%
          is_current = idx == 0
          field_label = field.label || field.name.titleize
        %>
        <button type="button"
                class="wizard-nav-dot group relative flex items-center justify-center
                       w-11 h-11 min-w-[44px] min-h-[44px]
                       rounded-full transition-all duration-200
                       focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2
                       hover:bg-base-200"
                data-wizard-target="dot"
                data-action="click->wizard#goTo"
                data-index="<%= idx %>"
                role="tab"
                aria-selected="<%= is_current %>"
                aria-label="Go to field <%= idx + 1 %> of <%= @wizard_fields.count %>: <%= field_label %>"
                aria-controls="wizard-card-<%= idx %>">
          <%# Visual dot indicator %>
          <span class="wizard-dot-indicator w-3 h-3 rounded-full transition-all duration-200
                       group-hover:scale-125
                       <%= is_current ? 'bg-primary ring-2 ring-primary ring-offset-2 ring-offset-base-100' : 'bg-base-300 group-hover:bg-primary/50' %>"
                aria-hidden="true">
          </span>
          <%# Completed checkmark (shown via JS) %>
          <span class="wizard-dot-complete absolute inset-0 flex items-center justify-center hidden"
                aria-hidden="true">
            <svg class="w-4 h-4 text-success" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
          </span>
        </button>
      <% end %>
    </div>
    <%# Screen reader status %>
    <div class="sr-only" aria-live="polite" data-wizard-target="dotStatus">
      Field 1 of <%= @wizard_fields.count %>
    </div>
  </nav>
<% end %>
